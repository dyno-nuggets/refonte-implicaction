<div class="col">
  <div class="card py-4 px-4 shadow-sm border-0">
    <div class="mb-3 d-flex justify-content-between">
      <h2>Formations</h2>
      <div>
        <i-feather
          (click)="toggleModeEdition()"
          *ngIf="!isEditing; else saveBlock"
          class="cursor-pointer"
          name="edit"
        >
        </i-feather>
        <ng-template #saveBlock>
          <i-feather
            (click)="toggleModeEdition()"
            class="cursor-pointer"
            name="rotate-ccw"
          >
          </i-feather>
          <i-feather
            (click)="updateTrainings()"
            class="cursor-pointer"
            name="save"
          >
          </i-feather>
        </ng-template>
      </div>
    </div>
    <ul [ngClass]="{'formation-edition': isEditing}">
      <ng-container *ngIf="isEditing || trainings?.length; else emptyInfo">
        <li
          *ngFor="let training of (isEditing ? trainingCopies : trainings); trackBy: trackByTrainingId; last as isLast;"
          class="list-unstyled"
        >
          <app-training-detail
            (deleteEvent)="deleteEvent(training)"
            [isEditing]="isEditing"
            [training]="training"
          >
          </app-training-detail>
          <hr *ngIf="!isLast" class="mx-4 mb-5"/>
        </li>
      </ng-container>
      <ng-template #emptyInfo>
        <span class="fst-italic">Non renseigné.</span>
      </ng-template>
    </ul>
    <button
      (click)="addElement()"
      *ngIf="isEditing"
      class="btn btn-primary mt-2"
    >
      Ajouter un élément
    </button>
  </div>
</div>
