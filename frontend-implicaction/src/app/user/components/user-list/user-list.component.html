<div class="row">
  <div class="col-12 col-md-4 col-lg-3 col-xxl-2 mb-3 p-0 pe-md-3">
    <a
      *ngFor="let menuItem of menuItems"
      [routerLinkActiveOptions]="{exact: true}"
      class="list-group-item list-group-item-action"
      [routerLink]=menuItem.routerLink
      routerLinkActive="active"
    >
      {{menuItem.label}}
    </a>
  </div>
  <div
    class="col-12 col-md-8 col-lg-9 col-xxl-10 d-flex"
    [ngClass]="{'justify-content-center': isLoading, 'justify-content-between': !isLoading}"
  >
    <ng-container *ngIf="!isLoading; else loadingTemplate">
      <div class="row p-0">
        <app-user-card
          *ngFor="let user of pageable.content; trackBy: trackByUserId; let isOdd = odd; let isEven = even"
          class="col-12 col-sm-6 col-lg-4 col-xl-3 d-flex p-0 justify-content-center mb-3 mb-xxl-5"
          [ngClass]="{'pe-sm-2 pe-lg-0 pe-xl-2': isEven, 'ps-sm-2 px-lg-2 ps-xl-0': isOdd}"
          [user]="user"
        >
          <div class="mt-4 mb-2">
            <ng-container [ngSwitch]="user.relationTypeOfCurrentUser">
              <ng-template [ngSwitchCase]="relationType.FRIEND">
                <button
                  (click)="removeUserRelation(user)"
                  class="btn btn-danger text-light rounded-pill"
                  data-bs-placement="top"
                  data-bs-toggle="tooltip"
                  title="Retirer des amis"
                  type="button"
                >
                  <i-feather class="icon" name="user-minus"></i-feather>
                </button>
              </ng-template>

              <ng-template [ngSwitchCase]="relationType.SENDER">
                <button
                  (click)="removeUserRelation(user)"
                  class="btn btn-danger text-light rounded-pill"
                  data-bs-placement="top"
                  data-bs-toggle="tooltip"
                  title="Annuler la demande d'ami"
                  type="button"
                >
                  <i-feather class="icon" name="user-x"></i-feather>
                </button>
              </ng-template>

              <ng-template [ngSwitchCase]="relationType.RECEIVER">
                <button
                  (click)="confirmUserAsFriend(user)"
                  class="btn btn-success rounded-pill mx-2 mx-sm-1"
                  data-bs-placement="top"
                  data-bs-toggle="tooltip"
                  title="Accepter la demande d'ami"
                  type="button"
                >
                  <i-feather class="icon" name="user-check"></i-feather>
                </button>
                <button
                  (click)="removeUserRelation(user)"
                  class="btn btn-danger rounded-pill mx-2 mx-sm-1"
                  data-bs-placement="top"
                  data-bs-toggle="tooltip"
                  title="Annuler la demande d'ami"
                  type="button"
                >
                  <i-feather class="icon" name="user-x"></i-feather>
                </button>
              </ng-template>

              <ng-template ngSwitchDefault>
                <button
                  (click)="requestUserAsFriend(user)"
                  class="btn btn-primary rounded-pill"
                  data-bs-placement="top"
                  data-bs-toggle="tooltip"
                  title="Demander en ami"
                  type="button"
                >
                  <i-feather class="icon" name="user-plus"></i-feather>
                </button>
              </ng-template>
            </ng-container>
          </div>
        </app-user-card>
      </div>
      <p-paginator
        (onPageChange)="paginate($event)"
        *ngIf="pageable.totalPages > 0"
        [alwaysShow]="false"
        [first]="pageable.first"
        [rowsPerPageOptions]="ROWS_PER_PAGE_OPTIONS"
        [rows]="pageable.rows"
        [totalRecords]="pageable.totalElements"
      >
      </p-paginator>
    </ng-container>
    <ng-template #loadingTemplate>
      <div class="d-flex justify-content-center spinner">
        <div class="align-self-center">
          <app-loading></app-loading>
        </div>
      </div>
    </ng-template>
  </div>
</div>
